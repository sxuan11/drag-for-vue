(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define("drag-for-vue",[],e):"object"===typeof exports?exports["drag-for-vue"]=e():t["drag-for-vue"]=e()})(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s="abd2")}({"187a":function(t,e,r){"use strict";r("5f8b")},"1deb":function(t,e,r){"use strict";r("21b8")},"21b8":function(t,e,r){},"5f8b":function(t,e,r){},abd2:function(t,e,r){"use strict";r.r(e),r.d(e,"install",(function(){return $})),r.d(e,"Drag",(function(){return l})),r.d(e,"DragItem",(function(){return _}));var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"wrap",staticClass:"wrap",on:{dragenter:function(t){t.preventDefault()},dragover:function(t){t.preventDefault()}}},[t._t("default")],2)},o=[],i={name:"Drag",data(){return{}},props:{data:{type:Array,default(){return[]}}},created(){this.toDom="",this.fromDom="",this.children=[],this.$on("dragstart",this.onDragstart),this.$on("dragenter",this.onDragenter),this.$on("dragend",this.onDragend),this.$on("putChild",t=>{this.children.push(t)})},methods:{onDragstart(t){this.fromDom=t},onDragenter(t){this.toDom=t,this.fromDom!==this.toDom&&(this.isPrevNode(this.fromDom,this.toDom)?this.$refs["wrap"].insertBefore(this.fromDom,this.toDom):this.$refs["wrap"].insertBefore(this.fromDom,this.toDom.nextSibling))},onDragend(){if(!this.data.length)return;const t=[...this.$el.children].filter(t=>t.classList.contains("__drag_item"));this.getDataOrder(t,this.children)},isPrevNode(t,e){while(null!==t.previousSibling){if(t.previousSibling===e)return!0;t=t.previousSibling}},getDataOrder(t,e){const r=t.map(t=>e.findIndex(e=>t===e)),n=[];r.forEach((t,e)=>{n[e]=this.data[t]}),this.$emit("getData",n)}}},a=i;r("1deb");function s(t,e,r,n,o,i,a,s){var d,u="function"===typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),a?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},u._ssrRegister=d):o&&(d=s?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),d)if(u.functional){u._injectStyles=d;var l=u.render;u.render=function(t,e){return d.call(e),l(t,e)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,d):[d]}return{exports:t,options:u}}var d=s(a,n,o,!1,null,"4980b74f",null),u=d.exports;u.install=t=>t.component(u.name,u);var l=u,c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"__drag_item",style:{cursor:t.$slots.drag?"":"move"},attrs:{draggable:!t.$slots.drag||t.isDrag},on:{dragstart:function(e){return e.stopPropagation(),t.onDragstart(e)},dragenter:function(e){return e.stopPropagation(),t.onDragenter(e)},dragend:function(e){return e.stopPropagation(),t.onDragend(e)}}},[t._t("drag"),t._t("default")],2)},f=[];function p(t,e,r){this.$children.forEach(n=>{const o=n.$options.name;o===t?n.$emit.apply(n,[e].concat(r)):p.apply(n,[t,e].concat([r]))})}var h={methods:{dispatch(t,e,r){let n=this.$parent||this.$root,o=n.$options.name;while(n&&(!o||o!==t))n=n.$parent,n&&(o=n.$options.name);n&&n.$emit.apply(n,[e].concat(r))},broadcast(t,e,r){p.call(this,t,e,r)}}},g={name:"DragItem",mixins:[h],data(){return{isDrag:!1}},mounted(){this.$slots.drag&&this.setSlotAttr(),this.dispatch("Drag","putChild",this.$el)},methods:{onDragstart(){this.$el.style.opacity="0.3",this.dispatch("Drag","dragstart",this.$el)},onDragenter(){this.dispatch("Drag","dragenter",this.$el)},onDragend(){this.$el.style.opacity="1",this.dispatch("Drag","dragend")},setSlotAttr(){const t=this.$slots.default.find(t=>!t.data&&" "!==t.text),e=t.elm.previousSibling;if(null!==e.previousSibling)throw"具名插槽内只能有一个根节点~";e.addEventListener("mouseenter",()=>{this.isDrag=!0}),e.addEventListener("mouseleave",()=>{this.isDrag=!1}),e.style.cursor="move"}}},m=g,v=(r("187a"),s(m,c,f,!1,null,"23e606d2",null)),D=v.exports;D.install=t=>t.component(D.name,D);var _=D;const b=[l,_],$=t=>{$.installed||(b.map(e=>t.component(e.name,e)),t.use(watermark))};"undefined"!==typeof window&&window.Vue&&$(window.Vue);e["default"]={install:$,Drag:l,DragItem:_}}})}));
//# sourceMappingURL=drag-for-vue.min.js.map