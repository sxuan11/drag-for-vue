(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define("drag-for-vue",[],e):"object"===typeof exports?exports["drag-for-vue"]=e():t["drag-for-vue"]=e()})(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s="abd2")}({"187a":function(t,e,n){"use strict";n("5f8b")},"5f8b":function(t,e,n){},"794e":function(t,e,n){"use strict";n("def1")},abd2:function(t,e,n){"use strict";n.r(e),n.d(e,"install",(function(){return y})),n.d(e,"Drag",(function(){return u})),n.d(e,"DragItem",(function(){return _}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrap",staticClass:"wrap",on:{dragenter:function(t){t.preventDefault()},dragover:function(t){t.preventDefault()}}},[t._t("default")],2)},o=[],i={name:"Drag",data(){return{}},props:{data:{type:Array,default(){return[]}}},created(){this.toDom="",this.fromDom="",this.children=[],this.$on("dragstart",this.onDragstart),this.$on("dragenter",this.onDragenter),this.$on("dragend",this.onDragend),this.$on("putChild",t=>{this.children.push(t)})},methods:{onDragstart(t){this.fromDom=t},onDragenter(t){this.toDom=t,this.fromDom!==this.toDom&&(this.isPrevNode(this.fromDom,this.toDom)?this.$refs["wrap"].insertBefore(this.fromDom,this.toDom):this.$refs["wrap"].insertBefore(this.fromDom,this.toDom.nextSibling))},onDragend(){if(!this.data.length)return;const t=[...this.$el.children].filter(t=>t.classList.contains("__drag_item"));this.getDataOrder(t,this.children)},isPrevNode(t,e){while(null!==t.previousSibling){if(t.previousSibling===e)return!0;t=t.previousSibling}},getDataOrder(t,e){const n=t.map(t=>e.findIndex(e=>t===e)),r=[];n.forEach((t,e)=>{r[e]=this.data[t]}),this.$emit("getData",r)},getDataInfo(){const t=this.children,e=[...this.$el.children].filter(t=>t.classList.contains("__drag_item")),n=e.map(e=>t.findIndex(t=>e===t)),r=[];return n.forEach((t,e)=>{r[e]=this.data[t]}),r}}},a=i;n("794e");function s(t,e,n,r,o,i,a,s){var d,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),a?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=d):o&&(d=s?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),d)if(l.functional){l._injectStyles=d;var u=l.render;l.render=function(t,e){return d.call(e),u(t,e)}}else{var c=l.beforeCreate;l.beforeCreate=c?[].concat(c,d):[d]}return{exports:t,options:l}}var d=s(a,r,o,!1,null,"f3dc665c",null),l=d.exports;l.install=t=>t.component(l.name,l);var u=l,c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"__drag_item",style:{cursor:t.$slots.drag?"":"move"},attrs:{draggable:!t.$slots.drag||t.isDrag},on:{dragstart:function(e){return e.stopPropagation(),t.onDragstart(e)},dragenter:function(e){return e.stopPropagation(),t.onDragenter(e)},dragend:function(e){return e.stopPropagation(),t.onDragend(e)}}},[t._t("drag"),t._t("default")],2)},f=[];function h(t,e,n){this.$children.forEach(r=>{const o=r.$options.name;o===t?r.$emit.apply(r,[e].concat(n)):h.apply(r,[t,e].concat([n]))})}var p={methods:{dispatch(t,e,n){let r=this.$parent||this.$root,o=r.$options.name;while(r&&(!o||o!==t))r=r.$parent,r&&(o=r.$options.name);r&&r.$emit.apply(r,[e].concat(n))},broadcast(t,e,n){h.call(this,t,e,n)}}},g={name:"DragItem",mixins:[p],data(){return{isDrag:!1}},mounted(){this.$slots.drag&&this.setSlotAttr(),this.dispatch("Drag","putChild",this.$el)},methods:{onDragstart(){this.$el.style.opacity="0.3",this.dispatch("Drag","dragstart",this.$el)},onDragenter(){this.dispatch("Drag","dragenter",this.$el)},onDragend(){this.$el.style.opacity="1",this.dispatch("Drag","dragend")},setSlotAttr(){const t=this.$slots.default.find(t=>!t.data&&" "!==t.text),e=t.elm.previousSibling;if(null!==e.previousSibling)throw"具名插槽内只能有一个根节点~";e.addEventListener("mouseenter",()=>{this.isDrag=!0}),e.addEventListener("mouseleave",()=>{this.isDrag=!1}),e.style.cursor="move"}}},m=g,D=(n("187a"),s(m,c,f,!1,null,"23e606d2",null)),v=D.exports;v.install=t=>t.component(v.name,v);var _=v;const $=[u,_],y=t=>{y.installed||($.map(e=>t.component(e.name,e)),t.use(watermark))};"undefined"!==typeof window&&window.Vue&&y(window.Vue);e["default"]={install:y,Drag:u,DragItem:_}},def1:function(t,e,n){}})}));
//# sourceMappingURL=drag-for-vue.min.js.map